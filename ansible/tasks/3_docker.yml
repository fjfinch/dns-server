---
- name: 'DOCKER : install docker-compose'
  ansible.builtin.apt:
    name: docker-compose
  become: true

- name: 'DOCKER : copy docker env file'
  ansible.builtin.template:
    src: templates/.env.j2
    dest: files/.env
    mode: '0644'
  become: true

- name: 'DOCKER : create volumes'
  community.docker.docker_volume:
    name: '{{ item.name }}'
  loop:
    - { name: volume_pihole_general }
  become: true

- name: 'DOCKER : create containers'
  community.docker.docker_compose:
    project_src: '{{ item.project_src }}'
  loop:
    - { project_src: files/ }
  become: true
